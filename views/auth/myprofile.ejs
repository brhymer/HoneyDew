<%- include("../partials/_head")%>

<h1>Welcome home, <%= user.username %>!</h1>

<p><b>Photo: </b><%= %></p>
<!-- add photo here -->
<p><b>Username: </b><%= user.username%></p>
<p><b>Full name: </b><%= user.firstName%> <%= user.lastName%></p>
<p><b>Email address: </b><%= user.email%></p>
<p><b>Joined: </b><%= user.joined%></p>

<%if(user.spaces.length > 0){%>
<p><b>Your spaces: </b></p>
<table class="table">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Name</th>
      <th scope="col">Description</th>
      <th scope="col">Edit</th>
      <th scope="col">Delete</th>
      <th scope="col">Updated</th>
    </tr>
  </thead>
  <tbody>
    <% user.spaces.forEach((space) => { %>
    <tr>
      <th scope="row"><%=user.spaces.indexOf(space) + 1%></th>
      <td><a href="/spaces/<%=space._id%>"><%=space.name%></a></td>
      <td><a href="/spaces/<%=space._id%>"><%=space.description%></a></td>
      <td>
        <a class="btn btn-primary btn-sm" href="/spaces/<%=space._id%>/edit"
          >Edit</a
        >
      </td>
      <td>
        <button
          class="btn btn-danger btn-sm"
          type="submit"
          data-toggle="modal"
          data-target="#deleteSpaceModal"
          data-spaceId="<%=space._id%>"
          data-spaceName="<%=space.name%>"
        >
          Delete
        </button>
      </td>
      <td><%= new Date(space.updatedAt).toDateString()%></td>
    </tr>
    <%})%>
  </tbody>
</table>
<%} else {%>
<p>No spaces exist, please see a physicist</p>
<% } %>

<a href="/auth/edit">Customize your profile</a>

<%- include ("../partials/_deleteTaskModal")%> <%- include
("../partials/_showTaskModal")%> <%- include("../partials/_footer")%>
