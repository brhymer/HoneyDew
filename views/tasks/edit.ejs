<%- include("../partials/_head")%>

<main>
    <h1>Tasks</h1>
    <%if(locals.error) {%>
        <%-include("../partials/_errorAlert", {error: error})%>
    <%}%>
    <form action="/tasks/<%=task._id%>?_method=PUT" method="POST">
        <div class="mt-3">
            <label class="d-block" for="title">Title</label>
            <input type="text" id="title" name="title" value="<%=task.title%>">
        </div>
        <div class="mt-3">
            <label class="d-block" for="description">Description</label>
            <textarea name="description" id="description" rows="5" cols="50"><%=task.description%></textarea>
        </div>
        <div class="mt-3">
            <label class="d-block" for="dueDate">Due Date:</label>
            <input type="date" id="dueDate" name="dueDate" value="<%=new Date(task.dueDate).toISOString().substring(0,10)%>">
        </div>
        <div class="mt-3">
            <button class="btn btn-primary btn-sm" type="submit">Update Task</button>
            <a class="btn btn-danger btn-sm" href="/spaces/<%=thisSpace%>">Cancel</a>
        </div>
        <div class="mt-3">
            <h6>Add this task to a space?</h6>
            <select name="spaceId" id="spaceId">
              <option value="" selected>Please choose a space</option>
              <% spaces.forEach((space) => { %>
              <option value="<%=space._id%>" <%=thisSpace.toString()===space._id.toString() ? "selected" : ""%>><%=space.name%></option>
              <% }) %>
            </select>
          </div>
    </form>

</main>

<%- include("../partials/_footer")%>